<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux | Master Reference</title>
    <meta name="description" content="The official Reference.">
    
    
    <link rel="preload" href="/ref-docs/assets/css/0.styles.4e79402e.css" as="style"><link rel="preload" href="/ref-docs/assets/js/app.5b9453b5.js" as="script"><link rel="preload" href="/ref-docs/assets/js/7.53964bab.js" as="script"><link rel="prefetch" href="/ref-docs/assets/js/10.89c17470.js"><link rel="prefetch" href="/ref-docs/assets/js/11.69ba043d.js"><link rel="prefetch" href="/ref-docs/assets/js/12.ca5127c5.js"><link rel="prefetch" href="/ref-docs/assets/js/13.3f1be654.js"><link rel="prefetch" href="/ref-docs/assets/js/14.1be0f1ad.js"><link rel="prefetch" href="/ref-docs/assets/js/15.c933258d.js"><link rel="prefetch" href="/ref-docs/assets/js/16.be86803d.js"><link rel="prefetch" href="/ref-docs/assets/js/17.21ce8928.js"><link rel="prefetch" href="/ref-docs/assets/js/18.d95665ab.js"><link rel="prefetch" href="/ref-docs/assets/js/19.1e2f9e9d.js"><link rel="prefetch" href="/ref-docs/assets/js/2.2f886c7a.js"><link rel="prefetch" href="/ref-docs/assets/js/20.ab1ee9ed.js"><link rel="prefetch" href="/ref-docs/assets/js/21.69840cbd.js"><link rel="prefetch" href="/ref-docs/assets/js/22.1eb55e5e.js"><link rel="prefetch" href="/ref-docs/assets/js/23.88329f87.js"><link rel="prefetch" href="/ref-docs/assets/js/24.791ec8ec.js"><link rel="prefetch" href="/ref-docs/assets/js/25.90118182.js"><link rel="prefetch" href="/ref-docs/assets/js/26.852d3e3a.js"><link rel="prefetch" href="/ref-docs/assets/js/27.28b6201d.js"><link rel="prefetch" href="/ref-docs/assets/js/28.a8d404f2.js"><link rel="prefetch" href="/ref-docs/assets/js/29.35c0058b.js"><link rel="prefetch" href="/ref-docs/assets/js/3.cf8bb0c1.js"><link rel="prefetch" href="/ref-docs/assets/js/30.eb764eb1.js"><link rel="prefetch" href="/ref-docs/assets/js/31.7a1bf0b0.js"><link rel="prefetch" href="/ref-docs/assets/js/32.41d7a5db.js"><link rel="prefetch" href="/ref-docs/assets/js/33.bd2beed6.js"><link rel="prefetch" href="/ref-docs/assets/js/34.98e44db4.js"><link rel="prefetch" href="/ref-docs/assets/js/35.4a514ab6.js"><link rel="prefetch" href="/ref-docs/assets/js/4.67a3259c.js"><link rel="prefetch" href="/ref-docs/assets/js/5.8e4e9862.js"><link rel="prefetch" href="/ref-docs/assets/js/6.2b3aed40.js"><link rel="prefetch" href="/ref-docs/assets/js/8.c2100da1.js"><link rel="prefetch" href="/ref-docs/assets/js/9.d5b272af.js">
    <link rel="stylesheet" href="/ref-docs/assets/css/0.styles.4e79402e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ref-docs/" class="home-link router-link-active"><!----> <span class="site-name">Master Reference</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ref-docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/ref-docs/docsDir/cloud/linux.html" class="nav-link router-link-exact-active router-link-active">Linux</a></div><div class="nav-item"><a href="/ref-docs/docsDir/programming/python.html" class="nav-link">Python</a></div><div class="nav-item"><a href="/ref-docs/docsDir/database/spark.html" class="nav-link">Spark</a></div> <a href="https://github.com/flarco/ref-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ref-docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/ref-docs/docsDir/cloud/linux.html" class="nav-link router-link-exact-active router-link-active">Linux</a></div><div class="nav-item"><a href="/ref-docs/docsDir/programming/python.html" class="nav-link">Python</a></div><div class="nav-item"><a href="/ref-docs/docsDir/database/spark.html" class="nav-link">Spark</a></div> <a href="https://github.com/flarco/ref-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/ref-docs/" class="sidebar-link">ref-docs</a></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Cloud</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/ref-docs/docsDir/cloud/amazon.html" class="sidebar-link">Amazon Web Services</a></li><li><a href="/ref-docs/docsDir/cloud/docker.html" class="sidebar-link">Docker</a></li><li><a href="/ref-docs/docsDir/cloud/git.html" class="sidebar-link">GIT</a></li><li><a href="/ref-docs/docsDir/cloud/linux.html" class="active sidebar-link">Linux</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#network" class="sidebar-link">Network</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#init" class="sidebar-link">Init</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#partitioning" class="sidebar-link">Partitioning</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#firewall" class="sidebar-link">Firewall</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#screen" class="sidebar-link">Screen</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#openvpn" class="sidebar-link">OpenVPN</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#tcpdump" class="sidebar-link">tcpdump</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#nano" class="sidebar-link">Nano</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#curl" class="sidebar-link">Curl</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#rpm-centos" class="sidebar-link">RPM (CentOs)</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#makefile" class="sidebar-link">MAKEFile</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#syncthing" class="sidebar-link">Syncthing</a></li><li class="sidebar-sub-header"><a href="/ref-docs/docsDir/cloud/linux.html#nginx" class="sidebar-link">NGINX</a></li></ul></li><li><a href="/ref-docs/docsDir/cloud/nginx.html" class="sidebar-link">NGinx</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Database</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/ref-docs/docsDir/database/elasticsearch.html" class="sidebar-link">ElasticSearch</a></li><li><a href="/ref-docs/docsDir/database/influxdb.html" class="sidebar-link">InfluxDB</a></li><li><a href="/ref-docs/docsDir/database/mysql.html" class="sidebar-link">MySQL</a></li><li><a href="/ref-docs/docsDir/database/oracle.html" class="sidebar-link">Oracle</a></li><li><a href="/ref-docs/docsDir/database/postgres.html" class="sidebar-link">PostgeSQL</a></li><li><a href="/ref-docs/docsDir/database/sas.html" class="sidebar-link">SAS</a></li><li><a href="/ref-docs/docsDir/database/spark.html" class="sidebar-link">Spark</a></li><li><a href="/ref-docs/docsDir/database/mongodb.html" class="sidebar-link">MongoDB</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Programming</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/ref-docs/docsDir/programming/android.html" class="sidebar-link">Android</a></li><li><a href="/ref-docs/docsDir/programming/go.html" class="sidebar-link">GO</a></li><li><a href="/ref-docs/docsDir/programming/java.html" class="sidebar-link">Java</a></li><li><a href="/ref-docs/docsDir/programming/scala.html" class="sidebar-link">Scala</a></li><li><a href="/ref-docs/docsDir/programming/nodejs.html" class="sidebar-link">NodeJS</a></li><li><a href="/ref-docs/docsDir/programming/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/ref-docs/docsDir/programming/powershell.html" class="sidebar-link">PowerShell</a></li><li><a href="/ref-docs/docsDir/programming/python-database.html" class="sidebar-link">Python | Database</a></li><li><a href="/ref-docs/docsDir/programming/python-jupyter.html" class="sidebar-link">Python | Jupyter</a></li><li><a href="/ref-docs/docsDir/programming/python-links.html" class="sidebar-link">Python Links</a></li><li><a href="/ref-docs/docsDir/programming/python.html" class="sidebar-link">Python</a></li><li><a href="/ref-docs/docsDir/programming/ruby.html" class="sidebar-link">Ruby</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>ETL</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/ref-docs/docsDir/etl/informatica.html" class="sidebar-link">Informatica</a></li><li><a href="/ref-docs/docsDir/etl/ssis.html" class="sidebar-link">SSIS</a></li><li><a href="/ref-docs/docsDir/etl/talend.html" class="sidebar-link">Talend</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="linux"><a href="#linux" aria-hidden="true" class="header-anchor">#</a> Linux</h1> <p>Reference for Linux.</p> <hr> <h1 id="key-commands-tools"><a href="#key-commands-tools" aria-hidden="true" class="header-anchor">#</a> Key Commands / Tools</h1> <h3 id="pgrep"><a href="#pgrep" aria-hidden="true" class="header-anchor">#</a> PGREP</h3> <p>To Find out if a process is already running</p> <div class="language- extra-class"><pre class="language-text"><code>pgrep tcpdump &amp;&amp; echo &quot;Already running..&quot; || ( /__/pfsense.tcp.sh &amp; )
</code></pre></div><h3 id="ps1"><a href="#ps1" aria-hidden="true" class="header-anchor">#</a> PS1</h3> <div class="language- extra-class"><pre class="language-text"><code>export PS1=&quot;\[\033[36m\]\u\[\033[m\]@\[\033[32m\]\h:\[\033[33;1m\]\w\[\033[m\]\$ &quot;
</code></pre></div><h3 id="watch"><a href="#watch" aria-hidden="true" class="header-anchor">#</a> WATCH</h3> <div class="language- extra-class"><pre class="language-text"><code>watch -n 5 ls -l # loops every 5 seconds
watch -n 5 insync-headless get_sync_progress

**Alternate solution**
while true; do ls -l; sleep .5; done
</code></pre></div><h3 id="du"><a href="#du" aria-hidden="true" class="header-anchor">#</a> DU</h3> <p>To find the largest folders in a path:</p> <div class="language- extra-class"><pre class="language-text"><code>du -m /some/path | sort -nr | head -n 20
</code></pre></div><h3 id="split"><a href="#split" aria-hidden="true" class="header-anchor">#</a> Split</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># split into 1000 line files</span>
<span class="token function">split</span> -l1000 <span class="token variable">$name</span>.txt <span class="token variable">$name</span>/part.

<span class="token comment"># split file into 65 parts with nnnn suffix (-da 4)</span>
<span class="token function">split</span> -l<span class="token variable"><span class="token variable">$((</span>`wc <span class="token operator">-</span>l <span class="token operator">&lt;</span> $name.txt`<span class="token operator">/</span><span class="token number">65</span><span class="token variable">))</span></span> <span class="token variable">$name</span>.txt <span class="token variable">$name</span>/part. -da 4
</code></pre></div><h4 id="gsplit"><a href="#gsplit" aria-hidden="true" class="header-anchor">#</a> Gsplit</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>brew <span class="token function">install</span> gsplit

<span class="token comment"># -a3 means 3 digits i.e. nnn e.g. 001 , -l 1024 means 1024 line chunks, --numeric-suffixes=1 means start at 1 instead of 0</span>
gsplit -a3 -l 1024 --numeric-suffixes<span class="token operator">=</span>1 flickr-roland-2004-12-avgcolour.txt 1024line-chunks-flickr-roland-2004-12-avgcolour-
</code></pre></div><h3 id="tar-–-archive"><a href="#tar-–-archive" aria-hidden="true" class="header-anchor">#</a> TAR – Archive</h3> <p>Make one tar from all files in a folder</p> <div class="language- extra-class"><pre class="language-text"><code>tar cvf /tmp/new_file.tar -C /path/to/source/folder .
</code></pre></div><p>Untar into folder</p> <div class="language- extra-class"><pre class="language-text"><code>tar xf /path/to/file.tar -C /path/to/target/folder
</code></pre></div><h3 id="alias"><a href="#alias" aria-hidden="true" class="header-anchor">#</a> ALIAS</h3> <div class="language- extra-class"><pre class="language-text"><code>alias dcp-service='docker-compose -f /__/docker/service/docker-compose.yml'
alias d-xenial='docker run --rm -it username/ubuntu:xenial bash -l'
</code></pre></div><ul><li>To Add to Shell scripts:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>shopt -s expand_aliases
source ~/.bash_aliases
</code></pre></div><h3 id="envsubst"><a href="#envsubst" aria-hidden="true" class="header-anchor">#</a> ENVSUBST</h3> <ul><li>Substitutes variables inside a text file with environment variables</li></ul> <p><em>Sample env.sh file:</em></p> <div class="language- extra-class"><pre class="language-text"><code>#!/bin/bash
export ORACLE_DB_IMAGE=&lt;image-name&gt;
export ORACLE_DB_PORT=&lt;port to be exposed&gt;
export ORACLE_DB_CONTAINER_NAME=ORACLE_DB_SERVER
</code></pre></div><p><em>Sample template.yml file:</em></p> <div class="language- extra-class"><pre class="language-text"><code>oracledb:
        image: ${ORACLE_DB_IMAGE}
        privileged: true
        cpuset: &quot;0&quot;
        ports:
                - &quot;${ORACLE_DB_PORT}:${ORACLE_DB_PORT}&quot;
        command: /bin/sh -c &quot;chmod 777 /tmp/start; /tmp/start&quot;
        container_name: ${ORACLE_DB_CONTAINER_NAME}

</code></pre></div><p><em>Command:</em></p> <div class="language- extra-class"><pre class="language-text"><code>source env.sh; rm -rf docker-compose.yml; envsubst &lt; &quot;template.yml&quot; &gt; &quot;docker-compose.yml&quot;;
</code></pre></div><h3 id="dd"><a href="#dd" aria-hidden="true" class="header-anchor">#</a> DD</h3> <p><strong>Test disk write speed / performance</strong></p> <div class="language- extra-class"><pre class="language-text"><code>dd if=/dev/zero of=/tmp/output conv=fdatasync bs=384k count=1k; rm -f /tmp/output
1024+0records in
1024+0 records out
402653184 bytes (403 MB) copied, 3.19232 s, 126 MB/s
</code></pre></div><h3 id="zip-unzip"><a href="#zip-unzip" aria-hidden="true" class="header-anchor">#</a> ZIP/UNZIP</h3> <div class="language- extra-class"><pre class="language-text"><code>zip -r my_folder.zip my_folder # from parent path of folder
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>unzip -uo my_folder.zip
</code></pre></div><h3 id="ssh"><a href="#ssh" aria-hidden="true" class="header-anchor">#</a> SSH</h3> <div class="language- extra-class"><pre class="language-text"><code>ssh-keygen -t rsa -P ''
ssh-copy-id -i ~/.ssh/id_rsa.pub user@targetserver
</code></pre></div><h3 id="sshfs"><a href="#sshfs" aria-hidden="true" class="header-anchor">#</a> SSHFS</h3> <div class="language- extra-class"><pre class="language-text"><code>ssh-keygen -t rsa -P ''
ssh-copy-id -i ~/.ssh/id_rsa.pub user@targetserver

sshfs -o allow_other -o auto_unmount -o reconnect user@targetserver:/_ /_
</code></pre></div><h3 id="autossh"><a href="#autossh" aria-hidden="true" class="header-anchor">#</a> AUTOSSH</h3> <div class="language- extra-class"><pre class="language-text"><code>apt install -y autossh
autossh [-V] [-M monitor_port[:echo_port]] [-f] [SSH_OPTIONS]
autossh -M 2000 -f user@targetserver -N -L 9200:xenial:9200 -C
autossh -M 2000 -f user@targetserver -g -L 127.0.0.1:9200:xenial:9200 -N -p80
</code></pre></div><h2 id="network"><a href="#network" aria-hidden="true" class="header-anchor">#</a> Network</h2> <h3 id="test-http-post-get"><a href="#test-http-post-get" aria-hidden="true" class="header-anchor">#</a> Test HTTP POST/GET</h3> <div class="language- extra-class"><pre class="language-text"><code>sudo nc -l 80
</code></pre></div><h1 id="ubuntu"><a href="#ubuntu" aria-hidden="true" class="header-anchor">#</a> Ubuntu</h1> <h2 id="init"><a href="#init" aria-hidden="true" class="header-anchor">#</a> Init</h2> <p><strong>Allow sudo without password:</strong></p> <div class="language- extra-class"><pre class="language-text"><code>sudo nano /etc/sudoers
gandalf ALL=(ALL) NOPASSWD: ALL # append
</code></pre></div><h3 id="mount"><a href="#mount" aria-hidden="true" class="header-anchor">#</a> Mount</h3> <div class="language- extra-class"><pre class="language-text"><code>sudo mount /dev/sdb1 /media/newhd
sudo mount -t cifs //host/folder /media/folder -o username=user -o password=password
</code></pre></div><p><strong>In /etc/fstab</strong></p> <div class="language- extra-class"><pre class="language-text"><code>/dev/sdb1 /media/folder auto defaults 0 2
</code></pre></div><h3 id="samba"><a href="#samba" aria-hidden="true" class="header-anchor">#</a> Samba</h3> <p><a href="https://tutorials.ubuntu.com/tutorial/install-and-configure-samba" target="_blank" rel="noopener noreferrer">https://tutorials.ubuntu.com/tutorial/install-and-configure-samba<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="partitioning"><a href="#partitioning" aria-hidden="true" class="header-anchor">#</a> Partitioning</h2> <p>For disks under 2TB:
<a href="https://www.howtogeek.com/106873/how-to-use-fdisk-to-manage-partitions-on-linux/" target="_blank" rel="noopener noreferrer">https://www.howtogeek.com/106873/how-to-use-fdisk-to-manage-partitions-on-linux/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>For disks over 2TB:
<a href="https://www.tecmint.com/parted-command-to-create-resize-rescue-linux-disk-partitions/" target="_blank" rel="noopener noreferrer">https://www.tecmint.com/parted-command-to-create-resize-rescue-linux-disk-partitions/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="firewall"><a href="#firewall" aria-hidden="true" class="header-anchor">#</a> Firewall</h2> <p><strong>Add Rule</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ufw allow ssh
ufw allow 1194/udp
ufw allow 80/tcp
</code></pre></div><p><strong>Enable</strong></p> <div class="language- extra-class"><pre class="language-text"><code>ufw enable
</code></pre></div><h2 id="screen"><a href="#screen" aria-hidden="true" class="header-anchor">#</a> Screen</h2> <p>to Log
<code>screen -L</code></p> <p>to run in background a command until it exits
<code>screen -d -m /path/to/command param1 param2</code></p> <p>Using screen in daemon mode.
<code>screen -dmS myservice /blah/start.sh</code>
Fit that line somewhere in a properly constructed init.d file and you're good to go. And if you need to execute a safe stop from that program through some interactivity:
<code>screen -S myservice -X stuff &quot;stop\n&quot;</code></p> <h2 id="openvpn"><a href="#openvpn" aria-hidden="true" class="header-anchor">#</a> OpenVPN</h2> <h3 id="client-setup"><a href="#client-setup" aria-hidden="true" class="header-anchor">#</a> Client Setup</h3> <div class="language- extra-class"><pre class="language-text"><code>sudo apt-get install -y openvpn
cd /__
sudo openvpn --config /__/VM1.ovpn

# screen background
echo &quot;sudo openvpn --config /__/VM1.ovpn | tee /__/openVPN.log&quot; &gt; /__/openVPN.sh
screen -d -m bash /__/openVPN.sh
</code></pre></div><h2 id="tcpdump"><a href="#tcpdump" aria-hidden="true" class="header-anchor">#</a> tcpdump</h2> <p><a href="http://openmaniak.com/tcpdump.php" target="_blank" rel="noopener noreferrer">http://openmaniak.com/tcpdump.php<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Port Filter</p> <div class="language- extra-class"><pre class="language-text"><code>tcpdump -nn -tttt port not 5000

tcpdump -U -i em0 -i em1 -nn -tttt port not 5141 and port not 5140 | python2.7 /__/pfsense_traffic_integration.py &quot;username-pc:5141&quot;

nn = don't resolve host names or port names
</code></pre></div><p>Full packet</p> <div class="language- extra-class"><pre class="language-text"><code>tcpdump -nn -A -s 0 -tttt -i em1 -i em0 dst 192.168.2.1
</code></pre></div><h2 id="nano"><a href="#nano" aria-hidden="true" class="header-anchor">#</a> Nano</h2> <p>Man: <a href="https://www.nano-editor.org/dist/v2.0/nano.html" target="_blank" rel="noopener noreferrer">https://www.nano-editor.org/dist/v2.0/nano.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="http://hyperpolyglot.org/text-mode-editors" target="_blank" rel="noopener noreferrer">http://hyperpolyglot.org/text-mode-editors<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Syntax Highligthing: <a href="http://askubuntu.com/questions/90013/how-do-i-enable-syntax-highlighting-in-nano" target="_blank" rel="noopener noreferrer">http://askubuntu.com/questions/90013/how-do-i-enable-syntax-highlighting-in-nano<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Configs:</p> <div class="language- extra-class"><pre class="language-text"><code>set tabsize 4
set tabstospaces
set autoindent
</code></pre></div><h2 id="curl"><a href="#curl" aria-hidden="true" class="header-anchor">#</a> Curl</h2> <p>###Post
<code>-H</code> are headers
<code>-d</code> is the text data to be be sent (below example is JSON'</p> <div class="language- extra-class"><pre class="language-text"><code>curl -H &quot;Content-Type: application/json&quot; -H &quot;Connection: Keep-Alive&quot; -H &quot;Authorization: Bearer AQWQ7BIj4PJ_W8ekWk-30RIG96bwW6S6p&quot; -X POST -d &quot;{ \&quot;comment\&quot;: \&quot;$link\&quot;, \&quot;visibility\&quot;: { \&quot;code\&quot;: \&quot;anyone\&quot; } }&quot; https://api.linkedin.com/v1/people/~/shares?format=json
</code></pre></div><h3 id="get"><a href="#get" aria-hidden="true" class="header-anchor">#</a> Get</h3> <div class="language- extra-class"><pre class="language-text"><code>curl --header &quot;Authorization: Bearer a503faf9-45b5-4fec-8334-337284a66ea4&quot; http://localhost:9001/rest/v1/electronics/custoers/current
curl -G https://www.google.com
</code></pre></div><h3 id="put"><a href="#put" aria-hidden="true" class="header-anchor">#</a> Put</h3> <div class="language- extra-class"><pre class="language-text"><code>curl -XPUT 'http://localhost:9200/_template/filebeat' -d@/etc/filebeat/filebeat.template.json
curl -XPUT localhost:9200/_template/tcpdump -d '
{
  &quot;order&quot;:0,
  &quot;template&quot;:&quot;tcpdump-*&quot;
}
'
</code></pre></div><h2 id="rpm-centos"><a href="#rpm-centos" aria-hidden="true" class="header-anchor">#</a> RPM (CentOs)</h2> <p>Installing RPM as non-root user</p> <ul><li><a href="https://superuser.com/questions/209808/how-can-i-install-an-rpm-without-being-root" target="_blank" rel="noopener noreferrer">https://superuser.com/questions/209808/how-can-i-install-an-rpm-without-being-root<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.cyberciti.biz/tips/how-to-extract-an-rpm-package-without-installing-it.html" target="_blank" rel="noopener noreferrer">https://www.cyberciti.biz/tips/how-to-extract-an-rpm-package-without-installing-it.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="makefile"><a href="#makefile" aria-hidden="true" class="header-anchor">#</a> MAKEFile</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>./configure --prefix<span class="token operator">=</span>/private/folder
<span class="token function">make</span> -j4  <span class="token comment"># 4 is number of threads</span>
</code></pre></div><h3 id="configure-library-path"><a href="#configure-library-path" aria-hidden="true" class="header-anchor">#</a> Configure Library PATH</h3> <ul><li><a href="https://askubuntu.com/questions/386315/how-to-add-libraries-path-to-the-configure-command" target="_blank" rel="noopener noreferrer">https://askubuntu.com/questions/386315/how-to-add-libraries-path-to-the-configure-command<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://stackoverflow.com/questions/37152366/compiler-says-uuid-h-not-found-but-apt-get-says-it-is" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/37152366/compiler-says-uuid-h-not-found-but-apt-get-says-it-is<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language- extra-class"><pre class="language-text"><code>export CPPFLAGS='-I/home/foo/sw/include'
export LDFLAGS='-L/home/foo/sw/lib/'
./configure
</code></pre></div><h3 id="default-permissions"><a href="#default-permissions" aria-hidden="true" class="header-anchor">#</a> Default Permissions</h3> <p><a href="https://unix.stackexchange.com/a/1315" target="_blank" rel="noopener noreferrer">https://unix.stackexchange.com/a/1315<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">chmod</span> g+s <span class="token operator">&lt;</span>directory<span class="token operator">&gt;</span>  //set gid
setfacl -d -m g::rwx /<span class="token operator">&lt;</span>directory<span class="token operator">&gt;</span>  //set group to rwx default
setfacl -d -m o::rx /<span class="token operator">&lt;</span>directory<span class="token operator">&gt;</span>   //set other
</code></pre></div><h2 id="syncthing"><a href="#syncthing" aria-hidden="true" class="header-anchor">#</a> Syncthing</h2> <p>http://www.syncthing.net</p> <h4 id="upstart-ubuntu-14-04"><a href="#upstart-ubuntu-14-04" aria-hidden="true" class="header-anchor">#</a> Upstart (Ubuntu 14.04)</h4> <p><strong>/etc/init/syncthing.conf</strong></p> <div class="language- extra-class"><pre class="language-text"><code>description &quot;Syncthing P2P sync service&quot;

start on (local-filesystems and net-device-up IFACE!=lo)
stop on runlevel [!2345]

env STNORESTART=yes
env HOME=/root
setuid &quot;root&quot;
setgid &quot;root&quot;

exec /usr/bin/syncthing

respawn
</code></pre></div><p><em><strong>Need to modify setting to access externally:</strong></em></p> <div class="language- extra-class"><pre class="language-text"><code>nano ~/.config/syncthing/config.xml

# Change FROM
&lt;gui enabled=&quot;true&quot; tls=&quot;false&quot;&gt;
    &lt;address&gt;127.0.0.1:8384&lt;/address&gt;
&lt;/gui&gt;

# To
&lt;gui enabled=&quot;true&quot; tls=&quot;false&quot;&gt;
    &lt;address&gt;0.0.0.0:8384&lt;/address&gt;
&lt;/gui&gt;
</code></pre></div><p><strong>To start:</strong> <code>start syncthing</code></p> <h2 id="nginx"><a href="#nginx" aria-hidden="true" class="header-anchor">#</a> NGINX</h2> <ul><li><a href="https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-uwsgi-and-nginx-on-ubuntu-14-04" target="_blank" rel="noopener noreferrer">https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-uwsgi-and-nginx-on-ubuntu-14-04<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://code-maven.com/deploying-python-flask-using-uwsgi-on-ubuntu-14-04" target="_blank" rel="noopener noreferrer">http://code-maven.com/deploying-python-flask-using-uwsgi-on-ubuntu-14-04<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/sinkcup/docker-library-nginx-mkdocs" target="_blank" rel="noopener noreferrer">https://github.com/sinkcup/docker-library-nginx-mkdocs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language- extra-class"><pre class="language-text"><code># LOGS
/var/log/nginx

# Sites Available
/etc/nginx/sites-available

# Sites enabled
/etc/nginx/sites-enabled

# Enable a site
ln -s /etc/nginx/sites-available/$project_name /etc/nginx/sites-enabled
</code></pre></div><h3 id="let-s-encrypt-ssl"><a href="#let-s-encrypt-ssl" aria-hidden="true" class="header-anchor">#</a> Let's Encrypt SSL</h3> <p><a href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-14-04" target="_blank" rel="noopener noreferrer">https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-14-04<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language- extra-class"><pre class="language-text"><code>sudo apt-get -y install git bc nginx
sudo git clone https://github.com/letsencrypt/letsencrypt /opt/letsencrypt
</code></pre></div><ul><li>Edit <code>/etc/nginx/sites-available/default</code>
Add this <em>server lock</em>:</li></ul> <div class="language- extra-class"><pre class="language-text"><code># make sure the root is changed to correct location
root /usr/share/nginx/html;

location ~ /.well-known {
    allow all;
}
</code></pre></div><ul><li>Crate <code>acme-challenge</code> folder:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mkdir -p /usr/share/nginx/html/.well-known/acme-challenge
</code></pre></div><ul><li>Reload NGINX</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sudo service nginx reload
</code></pre></div><ul><li>Run Lets Encrypt script, replacing <code>/path/to/root</code> with correct path:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>cd /opt/letsencrypt
./letsencrypt-auto certonly -a webroot --webroot-path=/usr/share/nginx/html -d example.com -d www.example.com
./letsencrypt-auto certonly -a webroot --webroot-path=/path/to/root -d example.com -d www.example.com
</code></pre></div><ul><li>Generate Strong Diffie-Hellman Group</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/ref-docs/docsDir/cloud/git.html" class="prev">
          GIT
        </a></span> <span class="next"><a href="/ref-docs/docsDir/cloud/nginx.html">
          NGinx
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/ref-docs/assets/js/app.5b9453b5.js" defer></script><script src="/ref-docs/assets/js/7.53964bab.js" defer></script>
  </body>
</html>
